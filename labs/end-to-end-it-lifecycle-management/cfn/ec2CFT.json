{
  "AWSTemplateFormatVersion" : "2010-09-09",
  "Description" : "AWS CloudFormation base Template for launching an EC2 instance.",
  "Parameters" : {
    "InstanceType" : {
      "Description" : "WebServer EC2 instance type",
      "Type" : "String",
      "AllowedValues" : [   "t2.micro", "t2.medium" ],
      "ConstraintDescription" : "Must be a valid EC2 instance type."
    },
    "LatestAmiId": {
      "Type": "AWS::SSM::Parameter::Value<AWS::EC2::Image::Id>",
      "Default": "/aws/service/ami-amazon-linux-latest/amzn2-ami-hvm-x86_64-gp2"            
    }
  },
  "Resources" : {
    "EC2Instance" : {
      "Type" : "AWS::EC2::Instance",
      "Properties" : {
        "InstanceType" : {
          "Ref" : "InstanceType"
        },
        "ImageId" :{ "Ref": "LatestAmiId" },
        "Tags" : [
          {"Key" : "Name", "Value" : {"Fn::Sub":"EC2-ITSM-LAB"} }
        ]
      }
    }
  },
  "Outputs" : {
    "InstanceName" : {
      "Value" : {
        "Ref" : "EC2Instance"
      },
      "Description" : "EC2 instance name"
    }
  }
} 